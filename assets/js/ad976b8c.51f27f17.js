"use strict";(self.webpackChunkx=self.webpackChunkx||[]).push([["4781"],{6247:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>s,default:()=>h,toc:()=>d,metadata:()=>r,assets:()=>o,contentTitle:()=>a});var r=JSON.parse('{"id":"getting-started/tutorials/flowers","title":"Flowers","description":"We will create an automated watering system for your flowers, with each plant having its own moisture sensor and motor for watering.","source":"@site/docs/02-getting-started/tutorials/flowers.md","sourceDirName":"02-getting-started/tutorials","slug":"/getting-started/tutorials/flowers","permalink":"/getting-started/tutorials/flowers","draft":false,"unlisted":false,"editUrl":"https://github.com/Morcatko/EspHome-Editor/tree/main/docs/docs/02-getting-started/tutorials/flowers.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"First Project","permalink":"/category/first-project"},"next":{"title":"Writing ESPHome configs","permalink":"/category/writing-esphome-configs"}}'),t=i(5893),l=i(65);let s={sidebar_position:1},a="Flowers",o={},d=[{value:"1. Shared Configuration",id:"1-shared-configuration",level:2},{value:"2. Flower Device",id:"2-flower-device",level:2},{value:"3. Additional Devices",id:"3-additional-devices",level:2}];function c(e){let n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"flowers",children:"Flowers"})}),"\n",(0,t.jsx)(n.p,{children:"We will create an automated watering system for your flowers, with each plant having its own moisture sensor and motor for watering."}),"\n",(0,t.jsx)(n.h2,{id:"1-shared-configuration",children:"1. Shared Configuration"}),"\n",(0,t.jsx)(n.p,{children:"In this step we will write a shared configuration template for all the plants. This template will be used to generate the configuration for each plant."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to the root ",(0,t.jsx)(n.code,{children:".lib"})," folder"]}),"\n",(0,t.jsxs)(n.li,{children:["Create a new eta template file","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:'"..."'})," menu on the ",(0,t.jsx)(n.code,{children:".lib"})," folder."]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"New File..."})," and name it ",(0,t.jsx)(n.code,{children:"demo-flower-template.eta"})]}),"\n",(0,t.jsx)(n.li,{children:"Add the folowing code to the file (Source panel)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"showLineNumbers .lib/demo-flowe-template.eta",children:'esphome:\r\n// highlight-next-line\r\n  name: <%= it.name %>\r\n\r\nesp32:\r\n  board: m5stack-atom\r\n  framework:\r\n    type: arduino\r\n\r\napi:\r\nota:\r\n    platform: esphome\r\n\r\nwifi:\r\n  ssid: !secret wifi_ssid\r\n  password: !secret wifi_password\r\n\r\n\r\nsensor:\r\n  - platform: adc\r\n    pin: 32\r\n    name: Soil Moisture Value\r\n    attenuation: 11db\r\n    id:  soil_moisture\r\n    accuracy_decimals: 0\r\n    unit_of_measurement: "%"\r\n    update_interval: 10s\r\n    filters:\r\n      - calibrate_linear:\r\n        - 0 -> 0.0\r\n        - 1.5 -> 100.0\r\n    on_value_range:\r\n    // highlight-next-line\r\n      - below: <%= it.moisture_limit %>\r\n        then:\r\n          - switch.turn_on: relay\r\n          // highlight-next-line\r\n      - above: <%= it.moisture_limit %>\r\n        then:\r\n          - switch.turn_off: relay\r\n\r\nswitch:\r\n  - platform: gpio\r\n    pin: 26\r\n    id: relay\r\n    name: "Water pump"\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Note the placeholders in the","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<= it.name %>"})," (e.g., Line 2) is used to insert the name of each plant."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<= it.moisture_limit  %>"})," (e.g., Lines 32 and 35) specifies the moisture threshold for watering."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:'These placeholders will dynamically update based on the variables you provide when using the template. You can test that by entering the following code in to "Test Data" panel:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": "sample",\r\n  "moisture_limit": 99\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"2-flower-device",children:"2. Flower Device"}),"\n",(0,t.jsx)(n.p,{children:"Here we will create a configuration for your first plant."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add a new device for your first plant:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["In the Devices Panel, click the ",(0,t.jsx)(n.em,{children:"+ New Device"})," button."]}),"\n",(0,t.jsxs)(n.li,{children:["Name it ",(0,t.jsx)(n.code,{children:"Flower-1"})]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.code,{children:"configuration.yaml"})," file will be generated automatically."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.em,{children:'"..."'})," menu on ",(0,t.jsx)(n.code,{children:"configuration.yaml"})," and rename it to ",(0,t.jsx)(n.code,{children:"configuration.eta"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Edit ",(0,t.jsx)(n.code,{children:"configuration.eta"})," with the following content:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"Flower-1/configuration.eta",children:"<%~ include('../.lib/demo-flower-template', \r\n    {\r\n        name: 'flower-1', \r\n        moisture_limit: 35\r\n    })\r\n%>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"3-additional-devices",children:"3. Additional Devices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Repeat ",(0,t.jsx)(n.em,{children:"Step 2"})," for each additional plant you want to automate. Just change the ",(0,t.jsx)(n.code,{children:"name"})," and ",(0,t.jsx)(n.code,{children:"moisture_limit"})]}),"\n",(0,t.jsx)(n.li,{children:"Flash the configuration files to your physical hardware devices."}),"\n",(0,t.jsx)(n.li,{children:"Enjoy your automated plant watering system!"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);